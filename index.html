<html>
<head>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        
    <title>Share It Here ! </title>
</head>

<body>
        <div class="container">
        
            <h2>Node.js + Socket Demo</h2>
            <h3>This text can be sharable among your team in a LAN and they can add text and share it with you too</h3>
            <h4>Add Text : </h4>
            <input class="form-control" type="text" placeholder="Add Your Message Here ! " id="newMessage">
            <br>
            <button id="addMessage" class="btn btn-success">Add ! </button><br> 
            <div id="listOfMessages"></div>
        </div>
        <script type="text/javascript">
                $(() => {
                getAllItems();
                 $("#addMessage").click( () => {
                   // addItem({"item": $("#newMessage").val()});
                 var theItem = {"item":$("#newMessage").val()}; 
                 postItem(theItem);  
                });
             });
            
             function addItem(itemToAdd){
                     console.log(itemToAdd);
                     $("#listOfMessages").prepend("<h4>"+ itemToAdd.item +"</h4>");
                     $("#newMessage").val('');
                    }

            function getAllItems(){
			$.get("/items", (data) => {
				data.forEach(addItem);
			})
		}

	    	function postItem(theItem){
			$.post("/items", theItem);
		}
             </script>
             
    </body>
</html>